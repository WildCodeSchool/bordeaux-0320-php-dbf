{% extends 'base.html.twig' %}

{% block title %}Hello CallRecuperatorController!{% endblock %}

{% block body %}


    <div class="row">
        <div class="col s11 offset-s1">
            <h1>Récupérateur d'appels</h1>
            <p>Vous retrouvez ici tous vos appels dont le traitement est normalement terminé. En cas d'erreur de traitement, vous pouvez récupérer ces appels si nécessaire</p>
        </div>
    </div>
    <div class="row">
        <div class="col s11 offset-s1">
            <table class="recuperator">
                {% for call in calls %}
                <tr>
                    <td>
                        {{ call.id }}
                    </td>
                    <td>
                        Appel de {{ call.client.civility.name }} {{ call.client.name }}
                    </td>
                    <td>
                        du {{ call.createdAt | date('d-m-Y') }} à {{ call.createdAt | date('H:i') }}
                    </td>
                    <td>
                        {{ call.freeComment | raw }}
                    </td>
                    <td>
                        {% for process in call.callProcessings %}
                            <b>{{ process.createdAt | date('d-m-Y') }} à  {{ process.createdAt | date('H:i') }}</b> : {{ process.contactType.name }} / {{ process.comment }}<br>
                        {% endfor %}
                    </td>
                    <td>
                        <a href="/call/reprocess/{{ call.id }}" class="btn red">Récupérer</a>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>

{% endblock %}
